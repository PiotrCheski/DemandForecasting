{% extends "base.html" %}

{% block head %}
    <title>Dane z pliku {{file_name}}</title>
{% endblock %}

{% block body %}
<div class="specific-file">
    <h1 class="">Dane dotyczące sprzedaży z pliku {{file_name}}</h1>
    <div class="details-table">
        <table class="">
            <thead>
                <tr>
                    <th>Okres</th>
                    <th>Wartość sprzedaży [szt./m-c]</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>{{ row['Okres'] }}</td>
                        <td>{{ row['Wartosci'] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <img src="data:image/png;base64, {{chart_data}}">    
    <h1>Prognoza popytu dla kolejnego miesiąca metodą średnich stałych</h1>
    <div class="details-table">
        <table class="">
            <thead>
                <tr>
                    <th>Okres</th>
                    <th>Wartość sprzedaży [szt./m-c]</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>{{ row['Okres'] }}</td>
                        <td>{{ row['Wartosci'] }}</td>
                    </tr>
                {% endfor %}
                <tr class="prediction">
                    <td>{{data|length + 1}}</td>
                    <td>{{ average }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <img src="data:image/png;base64, {{chart_average}}">    
    <h1>Prognoza popytu dla kolejnego miesiąca metodą średnich ruchomych</h1>
    <div class="details-table">
        <table class="">
            <thead>
                <tr>
                    <th>Okres</th>
                    <th>Wartość sprzedaży [szt./m-c]</th>
                    <th>n = 3</th>
                    <th>n = 6</th>
                    <th>n = 9</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>{{ row['Okres'] }}</td>
                        <td>{{ row['Wartosci'] }}</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                {% endfor %}
                <tr class="prediction">
                    <td>{{data|length + 1}}</td>
                    <td>-</td>
                    <td class="n3">{{moving_avg_n3}}</td>
                    <td class="n6">{{moving_avg_n6}}</td>
                    <td class="n9">{{moving_avg_n9}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <img src="data:image/png;base64, {{chart_moving}}">    

    <h1>Prognoza popytu dla kolejnego miesiąca metodą wygładzenia wykładniczego</h1>
    <div class="details-table">
        <table>
            <thead>
                <tr>
                    <th>Okres</th>
                    <th>Wartość sprzedaży [szt./m-c]</th>
                    <th>α = 0,10</th>
                    <th>α = 0,15</th>
                    <th>α = 0,20</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>{{ row['Okres'] }}</td>
                        <td>{{ row['Wartosci'] }}</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                {% endfor %}
                <tr class="prediction">
                    <td>{{data|length + 1}}</td>
                    <td>-</td>
                    <td class="expsmooth010">{{smoothed_values_010}}</td>
                    <td class="expsmooth015">{{smoothed_values_015}}</td>
                    <td class="expsmooth020">{{smoothed_values_020}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <img src="data:image/png;base64, {{chart_exponential_smoothing}}">    
    <h1>Prognoza popytu dla kolejnego miesiąca za pomocą regresji liniowej</h1>
    <div class="details-table">
        <table class="">
            <thead>
                <tr>
                    <th>Okres</th>
                    <th>Wartość sprzedaży [szt./m-c]</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>{{ row['Okres'] }}</td>
                        <td>{{ row['Wartosci'] }}</td>
                    </tr>
                {% endfor %}
                <tr class="prediction">
                    <td>{{data|length + 1}}</td>
                    <td>{{ forecast_linear_regression }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <img src="data:image/png;base64, {{chart_linear_regression}}">
        <h1>Podsumowanie</h1>
            <div class="details-table">
                <table>
                    <tr>
                    <th colspan="2">Metoda</th>
                    <th>Prognoza dla okresu {{data|length + 1}} [szt/m-c]</th>
                    </tr>
                    <tr>
                    <td rowspan="1" colspan="2">Metoda średniej stałej</td>
                    <td>{{ average }}</td>
                    </tr>
                    <tr>
                    <td rowspan="3">Metoda średniej ruchomej</td>
                    <td>n = 3</td>
                    <td>{{moving_avg_n3}}</td>
                    </tr>
                    <tr>
                    <td>n = 6</td>
                    <td>{{moving_avg_n6}}</td>
                    </tr>
                    <tr>
                    <td>n = 9</td>
                    <td>{{moving_avg_n9}}</td>
                    </tr>
                    <tr>
                    <td rowspan="3">Metoda wygładzania wykładniczego</td>
                    <td>α = 0,1</td>
                    <td>{{smoothed_values_010}}</td>
                    </tr>
                    <tr>
                    <td>α = 0,15</td>
                    <td>{{smoothed_values_015}}</td>
                    </tr>
                    <tr>
                    <td>α = 0,20</td>
                    <td>{{smoothed_values_020}}</td>
                    </tr>
                    <tr>
                    <td rowspan="1" colspan="2">Metoda regresji liniowej</td>
                    <td>{{ forecast_linear_regression }}</td>
                    </tr>
                </table>
            </div>
            <br>
</div>
{% endblock %}




